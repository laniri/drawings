components:
  schemas:
    AgeGroupModelResponse:
      description: Response model for age group model information.
      properties:
        age_max:
          maximum: 18.0
          minimum: 2.0
          title: Age Max
          type: number
        age_min:
          maximum: 18.0
          minimum: 2.0
          title: Age Min
          type: number
        created_timestamp:
          format: date-time
          title: Created Timestamp
          type: string
        id:
          title: Id
          type: integer
        is_active:
          title: Is Active
          type: boolean
        model_type:
          $ref: '#/components/schemas/AnalysisMethod'
        sample_count:
          minimum: 0.0
          title: Sample Count
          type: integer
        status:
          $ref: '#/components/schemas/ModelStatus'
        threshold:
          exclusiveMinimum: 0.0
          title: Threshold
          type: number
        vision_model:
          $ref: '#/components/schemas/VisionModel'
      required:
      - id
      - age_min
      - age_max
      - model_type
      - vision_model
      - sample_count
      - threshold
      - status
      - created_timestamp
      - is_active
      title: AgeGroupModelResponse
      type: object
    AgeGroupingStrategy:
      description: Enumeration for age grouping strategies.
      enum:
      - yearly
      - custom
      title: AgeGroupingStrategy
      type: string
    AnalysisHistoryResponse:
      description: Response model for analysis history of a drawing.
      properties:
        analyses:
          items:
            $ref: '#/components/schemas/AnomalyAnalysisResponse'
          title: Analyses
          type: array
        drawing_id:
          title: Drawing Id
          type: integer
        total_count:
          title: Total Count
          type: integer
      required:
      - drawing_id
      - analyses
      - total_count
      title: AnalysisHistoryResponse
      type: object
    AnalysisMethod:
      description: Enumeration for anomaly detection methods.
      enum:
      - autoencoder
      title: AnalysisMethod
      type: string
    AnalysisRequest:
      description: Request model for analyzing a drawing.
      properties:
        drawing_id:
          description: ID of the drawing to analyze
          exclusiveMinimum: 0.0
          title: Drawing Id
          type: integer
        force_reanalysis:
          default: false
          description: Force re-analysis even if results exist
          title: Force Reanalysis
          type: boolean
      required:
      - drawing_id
      title: AnalysisRequest
      type: object
    AnalysisResultResponse:
      description: Complete analysis result including drawing, analysis, and interpretability.
      properties:
        analysis:
          $ref: '#/components/schemas/AnomalyAnalysisResponse'
        comparison_examples:
          description: Similar normal examples from the same age group
          items:
            $ref: '#/components/schemas/ComparisonExampleResponse'
          title: Comparison Examples
          type: array
        drawing:
          $ref: '#/components/schemas/DrawingResponse'
        interpretability:
          anyOf:
          - $ref: '#/components/schemas/InterpretabilityResponse'
          - type: 'null'
      required:
      - drawing
      - analysis
      title: AnalysisResultResponse
      type: object
    AnomalyAnalysisResponse:
      description: Response model for anomaly analysis results.
      properties:
        age_group:
          description: Age group used for analysis
          title: Age Group
          type: string
        analysis_timestamp:
          format: date-time
          title: Analysis Timestamp
          type: string
        anomaly_score:
          description: Raw anomaly score
          title: Anomaly Score
          type: number
        confidence:
          description: Confidence in the anomaly decision
          maximum: 1.0
          minimum: 0.0
          title: Confidence
          type: number
        drawing_id:
          title: Drawing Id
          type: integer
        id:
          title: Id
          type: integer
        is_anomaly:
          description: Whether the drawing is flagged as anomalous
          title: Is Anomaly
          type: boolean
        method_used:
          $ref: '#/components/schemas/AnalysisMethod'
          description: Analysis method used
        normalized_score:
          description: 'Normalized anomaly score (0-100 scale: 0=no anomaly, 100=maximal
            anomaly)'
          maximum: 100.0
          minimum: 0.0
          title: Normalized Score
          type: number
        vision_model:
          $ref: '#/components/schemas/VisionModel'
          description: Vision model used
      required:
      - id
      - drawing_id
      - anomaly_score
      - normalized_score
      - is_anomaly
      - confidence
      - age_group
      - method_used
      - vision_model
      - analysis_timestamp
      title: AnomalyAnalysisResponse
      type: object
    BatchAnalysisRequest:
      description: Request model for batch analysis of multiple drawings.
      properties:
        drawing_ids:
          description: List of drawing IDs to analyze
          items:
            type: integer
          maxItems: 100
          minItems: 1
          title: Drawing Ids
          type: array
        force_reanalysis:
          default: false
          description: Force re-analysis even if results exist
          title: Force Reanalysis
          type: boolean
      required:
      - drawing_ids
      title: BatchAnalysisRequest
      type: object
    BatchAnalysisResponse:
      description: Response model for batch analysis operations.
      properties:
        batch_id:
          description: Unique identifier for the batch
          title: Batch Id
          type: string
        completed:
          description: Number of completed analyses
          minimum: 0.0
          title: Completed
          type: integer
        completed_at:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Completed At
        errors:
          description: Error details for failed analyses
          items:
            additionalProperties: true
            type: object
          title: Errors
          type: array
        failed:
          description: Number of failed analyses
          minimum: 0.0
          title: Failed
          type: integer
        results:
          description: Completed analysis results
          items:
            $ref: '#/components/schemas/AnalysisResultResponse'
          title: Results
          type: array
        started_at:
          format: date-time
          title: Started At
          type: string
        status:
          description: Batch processing status
          title: Status
          type: string
        total_drawings:
          description: Total number of drawings to analyze
          exclusiveMinimum: 0.0
          title: Total Drawings
          type: integer
      required:
      - batch_id
      - total_drawings
      - completed
      - failed
      - status
      - started_at
      title: BatchAnalysisResponse
      type: object
    Body_batch_upload_drawings_api_v1_drawings_batch_upload_post:
      properties:
        files:
          description: Multiple drawing files
          items:
            format: binary
            type: string
          title: Files
          type: array
      required:
      - files
      title: Body_batch_upload_drawings_api_v1_drawings_batch_upload_post
      type: object
    Body_merge_age_groups_api_v1_models_data_sufficiency_merge_age_groups_post:
      properties:
        merged_group:
          items:
            type: number
          title: Merged Group
          type: array
        original_groups:
          items:
            items:
              type: number
            type: array
          title: Original Groups
          type: array
      required:
      - original_groups
      - merged_group
      title: Body_merge_age_groups_api_v1_models_data_sufficiency_merge_age_groups_post
      type: object
    Body_upload_backup_api_v1_backup_upload_post:
      properties:
        file:
          format: binary
          title: File
          type: string
      required:
      - file
      title: Body_upload_backup_api_v1_backup_upload_post
      type: object
    Body_upload_drawing_api_v1_drawings_upload_post:
      properties:
        age_years:
          description: Child's age in years
          maximum: 18.0
          minimum: 2.0
          title: Age Years
          type: number
        drawing_tool:
          anyOf:
          - type: string
          - type: 'null'
          description: Drawing tool used
          title: Drawing Tool
        expert_label:
          anyOf:
          - type: string
          - type: 'null'
          description: Expert assessment
          title: Expert Label
        file:
          description: Drawing image file (PNG, JPEG, BMP)
          format: binary
          title: File
          type: string
        prompt:
          anyOf:
          - type: string
          - type: 'null'
          description: Drawing prompt
          title: Prompt
        subject:
          anyOf:
          - type: string
          - type: 'null'
          description: Drawing subject
          title: Subject
      required:
      - file
      - age_years
      title: Body_upload_drawing_api_v1_drawings_upload_post
      type: object
    ComparisonExampleResponse:
      description: Response model for comparison examples.
      properties:
        age_years:
          title: Age Years
          type: number
        anomaly_score:
          description: Anomaly score of the comparison example
          title: Anomaly Score
          type: number
        drawing_id:
          title: Drawing Id
          type: integer
        filename:
          title: Filename
          type: string
        normalized_score:
          description: 'Normalized anomaly score of the comparison example (0-100
            scale: 0=no anomaly, 100=maximal anomaly)'
          maximum: 100.0
          minimum: 0.0
          title: Normalized Score
          type: number
        similarity_score:
          description: Similarity score to the analyzed drawing
          maximum: 1.0
          minimum: 0.0
          title: Similarity Score
          type: number
        subject:
          anyOf:
          - type: string
          - type: 'null'
          title: Subject
      required:
      - drawing_id
      - filename
      - age_years
      - similarity_score
      - anomaly_score
      - normalized_score
      title: ComparisonExampleResponse
      type: object
    ConfigurationUpdateRequest:
      description: Request model for updating system configuration.
      properties:
        age_grouping_strategy:
          anyOf:
          - $ref: '#/components/schemas/AgeGroupingStrategy'
          - type: 'null'
        max_age_group_span:
          anyOf:
          - exclusiveMinimum: 0.0
            maximum: 16.0
            type: number
          - type: 'null'
          title: Max Age Group Span
        min_samples_per_group:
          anyOf:
          - minimum: 10.0
            type: integer
          - type: 'null'
          title: Min Samples Per Group
        threshold_percentile:
          anyOf:
          - maximum: 99.9
            minimum: 50.0
            type: number
          - type: 'null'
          description: Percentile for threshold calculation
          title: Threshold Percentile
      title: ConfigurationUpdateRequest
      type: object
    DrawingListResponse:
      description: Response model for listing multiple drawings.
      properties:
        drawings:
          items:
            $ref: '#/components/schemas/DrawingResponse'
          title: Drawings
          type: array
        page:
          description: Current page number
          minimum: 1.0
          title: Page
          type: integer
        page_size:
          description: Number of items per page
          maximum: 100.0
          minimum: 1.0
          title: Page Size
          type: integer
        total_count:
          title: Total Count
          type: integer
        total_pages:
          title: Total Pages
          type: integer
      required:
      - drawings
      - total_count
      - page
      - page_size
      - total_pages
      title: DrawingListResponse
      type: object
    DrawingResponse:
      description: Response model for drawing information.
      properties:
        age_years:
          title: Age Years
          type: number
        drawing_tool:
          anyOf:
          - type: string
          - type: 'null'
          title: Drawing Tool
        expert_label:
          anyOf:
          - type: string
          - type: 'null'
          title: Expert Label
        filename:
          title: Filename
          type: string
        id:
          title: Id
          type: integer
        prompt:
          anyOf:
          - type: string
          - type: 'null'
          title: Prompt
        subject:
          anyOf:
          - type: string
          - type: 'null'
          title: Subject
        upload_timestamp:
          format: date-time
          title: Upload Timestamp
          type: string
      required:
      - id
      - filename
      - age_years
      - subject
      - expert_label
      - drawing_tool
      - prompt
      - upload_timestamp
      title: DrawingResponse
      type: object
    ExpertLabel:
      description: Enumeration for expert labels on drawings.
      enum:
      - normal
      - concern
      - severe
      title: ExpertLabel
      type: string
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          title: Detail
          type: array
      title: HTTPValidationError
      type: object
    HealthCheckResponse:
      description: Health check response model.
      properties:
        database:
          description: Database status
          title: Database
          type: string
        models:
          description: ML models status
          title: Models
          type: string
        status:
          description: Service status
          title: Status
          type: string
        storage:
          description: File storage status
          title: Storage
          type: string
        timestamp:
          description: Check timestamp
          title: Timestamp
          type: string
        version:
          description: Application version
          title: Version
          type: string
      required:
      - status
      - timestamp
      - version
      - database
      - models
      - storage
      title: HealthCheckResponse
      type: object
    InterpretabilityResponse:
      description: Response model for interpretability results.
      properties:
        explanation_text:
          anyOf:
          - type: string
          - type: 'null'
          description: Human-readable explanation
          title: Explanation Text
        importance_regions:
          description: List of important regions with bounding boxes
          items:
            additionalProperties: true
            type: object
          title: Importance Regions
          type: array
        overlay_image_url:
          description: URL to overlay visualization
          title: Overlay Image Url
          type: string
        saliency_map_url:
          description: URL to saliency map image
          title: Saliency Map Url
          type: string
      required:
      - saliency_map_url
      - overlay_image_url
      title: InterpretabilityResponse
      type: object
    ModelDeploymentRequest:
      description: Request model for deploying trained model parameters.
      properties:
        age_group_max:
          maximum: 18.0
          minimum: 2.0
          title: Age Group Max
          type: number
        age_group_min:
          maximum: 18.0
          minimum: 2.0
          title: Age Group Min
          type: number
        model_parameters_path:
          description: Path to trained model parameters
          title: Model Parameters Path
          type: string
        replace_existing:
          default: false
          description: Whether to replace existing model for age group
          title: Replace Existing
          type: boolean
      required:
      - model_parameters_path
      - age_group_min
      - age_group_max
      title: ModelDeploymentRequest
      type: object
    ModelListResponse:
      description: Response model for listing age group models.
      properties:
        active_count:
          title: Active Count
          type: integer
        models:
          items:
            $ref: '#/components/schemas/AgeGroupModelResponse'
          title: Models
          type: array
        total_count:
          title: Total Count
          type: integer
        training_count:
          title: Training Count
          type: integer
      required:
      - models
      - total_count
      - active_count
      - training_count
      title: ModelListResponse
      type: object
    ModelStatus:
      description: Enumeration for model training status.
      enum:
      - training
      - ready
      - failed
      - insufficient_data
      title: ModelStatus
      type: string
    ModelStatusResponse:
      description: Response model for model training and system status.
      properties:
        active_models:
          minimum: 0.0
          title: Active Models
          type: integer
        failed_models:
          minimum: 0.0
          title: Failed Models
          type: integer
        last_training:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Last Training
        system_status:
          title: System Status
          type: string
        total_analyses:
          minimum: 0.0
          title: Total Analyses
          type: integer
        total_drawings:
          minimum: 0.0
          title: Total Drawings
          type: integer
        total_models:
          minimum: 0.0
          title: Total Models
          type: integer
        training_models:
          minimum: 0.0
          title: Training Models
          type: integer
      required:
      - total_models
      - active_models
      - training_models
      - failed_models
      - total_drawings
      - total_analyses
      - system_status
      title: ModelStatusResponse
      type: object
    ModelTrainingRequest:
      description: Request model for training a new age group model.
      properties:
        age_max:
          maximum: 18.0
          minimum: 2.0
          title: Age Max
          type: number
        age_min:
          maximum: 18.0
          minimum: 2.0
          title: Age Min
          type: number
        min_samples:
          default: 50
          description: Minimum samples required for training
          minimum: 10.0
          title: Min Samples
          type: integer
        model_type:
          $ref: '#/components/schemas/AnalysisMethod'
          default: autoencoder
        vision_model:
          $ref: '#/components/schemas/VisionModel'
          default: vit
      required:
      - age_min
      - age_max
      title: ModelTrainingRequest
      type: object
    SuccessResponse:
      description: Standard success response model.
      properties:
        data:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          description: Response data
          title: Data
        message:
          description: Success message
          title: Message
          type: string
        success:
          default: true
          title: Success
          type: boolean
      required:
      - message
      title: SuccessResponse
      type: object
    SystemConfigurationResponse:
      description: Response model for system configuration.
      properties:
        age_grouping_strategy:
          $ref: '#/components/schemas/AgeGroupingStrategy'
        anomaly_detection_method:
          $ref: '#/components/schemas/AnalysisMethod'
        max_age_group_span:
          exclusiveMinimum: 0.0
          maximum: 16.0
          title: Max Age Group Span
          type: number
        min_samples_per_group:
          minimum: 10.0
          title: Min Samples Per Group
          type: integer
        threshold_percentile:
          maximum: 99.9
          minimum: 50.0
          title: Threshold Percentile
          type: number
        vision_model:
          $ref: '#/components/schemas/VisionModel'
      required:
      - vision_model
      - anomaly_detection_method
      - threshold_percentile
      - age_grouping_strategy
      - min_samples_per_group
      - max_age_group_span
      title: SystemConfigurationResponse
      type: object
    ThresholdUpdateRequest:
      description: Request model for updating model thresholds.
      properties:
        percentile:
          anyOf:
          - maximum: 99.9
            minimum: 50.0
            type: number
          - type: 'null'
          description: Percentile for automatic threshold calculation
          title: Percentile
        threshold:
          description: New threshold value
          exclusiveMinimum: 0.0
          title: Threshold
          type: number
      required:
      - threshold
      title: ThresholdUpdateRequest
      type: object
    TrainingConfigRequest:
      description: Request model for training job configuration.
      properties:
        batch_size:
          default: 32
          maximum: 512.0
          minimum: 1.0
          title: Batch Size
          type: integer
        dataset_folder:
          description: Path to folder containing drawings
          title: Dataset Folder
          type: string
        environment:
          $ref: '#/components/schemas/TrainingEnvironment'
        epochs:
          default: 100
          maximum: 1000.0
          minimum: 1.0
          title: Epochs
          type: integer
        instance_count:
          default: 1
          maximum: 10.0
          minimum: 1.0
          title: Instance Count
          type: integer
        instance_type:
          anyOf:
          - type: string
          - type: 'null'
          default: ml.m5.large
          description: SageMaker instance type
          title: Instance Type
        job_name:
          description: Unique name for the training job
          title: Job Name
          type: string
        learning_rate:
          default: 0.001
          maximum: 1.0
          minimum: 1.0e-06
          title: Learning Rate
          type: number
        metadata_file:
          description: Path to metadata CSV/JSON file
          title: Metadata File
          type: string
        test_split:
          default: 0.1
          maximum: 0.3
          minimum: 0.05
          title: Test Split
          type: number
        train_split:
          default: 0.7
          maximum: 0.9
          minimum: 0.1
          title: Train Split
          type: number
        validation_split:
          default: 0.2
          maximum: 0.5
          minimum: 0.1
          title: Validation Split
          type: number
      required:
      - job_name
      - environment
      - dataset_folder
      - metadata_file
      title: TrainingConfigRequest
      type: object
    TrainingEnvironment:
      description: Enumeration for training environments.
      enum:
      - local
      - sagemaker
      title: TrainingEnvironment
      type: string
    TrainingJobResponse:
      description: Response model for training job information.
      properties:
        end_timestamp:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: End Timestamp
        environment:
          title: Environment
          type: string
        id:
          title: Id
          type: integer
        job_name:
          title: Job Name
          type: string
        sagemaker_job_arn:
          anyOf:
          - type: string
          - type: 'null'
          title: Sagemaker Job Arn
        start_timestamp:
          anyOf:
          - format: date-time
            type: string
          - type: 'null'
          title: Start Timestamp
        status:
          title: Status
          type: string
      required:
      - id
      - job_name
      - environment
      - status
      - start_timestamp
      - end_timestamp
      - sagemaker_job_arn
      title: TrainingJobResponse
      type: object
    TrainingReportResponse:
      description: Response model for training report information.
      properties:
        best_epoch:
          title: Best Epoch
          type: integer
        created_timestamp:
          format: date-time
          title: Created Timestamp
          type: string
        final_loss:
          title: Final Loss
          type: number
        id:
          title: Id
          type: integer
        model_parameters_path:
          title: Model Parameters Path
          type: string
        report_file_path:
          title: Report File Path
          type: string
        training_time_seconds:
          title: Training Time Seconds
          type: number
        validation_accuracy:
          title: Validation Accuracy
          type: number
      required:
      - id
      - final_loss
      - validation_accuracy
      - best_epoch
      - training_time_seconds
      - model_parameters_path
      - report_file_path
      - created_timestamp
      title: TrainingReportResponse
      type: object
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          title: Location
          type: array
        msg:
          title: Message
          type: string
        type:
          title: Error Type
          type: string
      required:
      - loc
      - msg
      - type
      title: ValidationError
      type: object
    VisionModel:
      description: Enumeration for vision models.
      enum:
      - vit
      title: VisionModel
      type: string
info:
  contact:
    email: support@example.com
    name: API Support
  description: Machine learning system for detecting anomalies in children's drawings
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Children's Drawing Anomaly Detection System
  version: 0.1.0
openapi: 3.1.0
paths:
  /:
    get:
      description: Root endpoint providing basic system information.
      operationId: root__get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Root
      tags:
      - ''
  /api/v1/alerts:
    get:
      description: Get current system alerts.
      operationId: get_current_alerts_api_v1_alerts_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Current system alerts
      tags:
      - health
  /api/v1/alerts/thresholds:
    post:
      description: Update system alert thresholds.
      operationId: update_alert_thresholds_api_v1_alerts_thresholds_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              additionalProperties:
                type: number
              title: Thresholds
              type: object
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update alert thresholds
      tags:
      - health
  /api/v1/analysis/analyze/{drawing_id}:
    post:
      description: 'Analyze specific drawing for anomalies.


        This endpoint performs anomaly detection on a single drawing,

        generating embeddings, computing anomaly scores, and providing

        interpretability results if the drawing is flagged as anomalous.'
      operationId: analyze_drawing_api_v1_analysis_analyze__drawing_id__post
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/AnalysisRequest'
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/AnalysisResultResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Analyze Drawing
      tags:
      - analysis
  /api/v1/analysis/batch:
    post:
      description: 'Batch analyze multiple drawings.


        This endpoint accepts a list of drawing IDs and processes them

        in the background, returning a batch ID for progress tracking.'
      operationId: batch_analyze_api_v1_analysis_batch_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/BatchAnalysisRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                additionalProperties: true
                title: Response Batch Analyze Api V1 Analysis Batch Post
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Batch Analyze
      tags:
      - analysis
  /api/v1/analysis/batch/{batch_id}/progress:
    get:
      description: Get progress of batch analysis.
      operationId: get_batch_progress_api_v1_analysis_batch__batch_id__progress_get
      parameters:
      - in: path
        name: batch_id
        required: true
        schema:
          title: Batch Id
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/BatchAnalysisResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Batch Progress
      tags:
      - analysis
  /api/v1/analysis/drawing/{drawing_id}:
    get:
      description: 'Get all analyses for a specific drawing.


        This endpoint returns the analysis history for a drawing,

        ordered by most recent first.'
      operationId: get_drawing_analyses_api_v1_analysis_drawing__drawing_id__get
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      - in: query
        name: limit
        required: false
        schema:
          default: 10
          title: Limit
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/AnalysisHistoryResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Drawing Analyses
      tags:
      - analysis
  /api/v1/analysis/embeddings/{drawing_id}:
    post:
      description: 'Generate embedding for a drawing without requiring a trained model.


        This endpoint is used during the training phase to generate embeddings

        for all drawings before training the autoencoder models.'
      operationId: generate_embedding_api_v1_analysis_embeddings__drawing_id__post
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Generate Embedding
      tags:
      - analysis
  /api/v1/analysis/stats:
    get:
      description: 'Get dashboard statistics for analyses and drawings.


        This endpoint provides comprehensive statistics for the dashboard

        including drawing counts, analysis results, and model status.'
      operationId: get_analysis_stats_api_v1_analysis_stats_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get Analysis Stats
      tags:
      - analysis
  /api/v1/analysis/{analysis_id}:
    get:
      description: 'Get analysis results by analysis ID.


        This endpoint retrieves a complete analysis result including

        the drawing information, anomaly analysis, and interpretability

        results if available.'
      operationId: get_analysis_result_api_v1_analysis__analysis_id__get
      parameters:
      - in: path
        name: analysis_id
        required: true
        schema:
          title: Analysis Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/AnalysisResultResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Analysis Result
      tags:
      - analysis
  /api/v1/backup/database:
    post:
      description: Create a database-only backup.
      operationId: create_database_backup_api_v1_backup_database_post
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Create database backup
      tags:
      - backup
  /api/v1/backup/download/{backup_name}:
    get:
      description: Download a specific backup file.
      operationId: download_backup_api_v1_backup_download__backup_name__get
      parameters:
      - in: path
        name: backup_name
        required: true
        schema:
          title: Backup Name
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Download backup file
      tags:
      - backup
  /api/v1/backup/full:
    post:
      description: Create a full system backup including database and files.
      operationId: create_full_backup_api_v1_backup_full_post
      parameters:
      - description: Include uploaded files and generated content
        in: query
        name: include_files
        required: false
        schema:
          default: true
          description: Include uploaded files and generated content
          title: Include Files
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Create full system backup
      tags:
      - backup
  /api/v1/backup/list:
    get:
      description: Get list of available backup files.
      operationId: list_backups_api_v1_backup_list_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: List available backups
      tags:
      - backup
  /api/v1/backup/restore:
    post:
      description: Restore system from a backup file.
      operationId: restore_from_backup_api_v1_backup_restore_post
      parameters:
      - in: query
        name: backup_name
        required: true
        schema:
          title: Backup Name
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Restore from backup
      tags:
      - backup
  /api/v1/backup/upload:
    post:
      description: Upload a backup file for restoration.
      operationId: upload_backup_api_v1_backup_upload_post
      requestBody:
        content:
          multipart/form-data:
            example: {}
            schema:
              $ref: '#/components/schemas/Body_upload_backup_api_v1_backup_upload_post'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Upload backup file
      tags:
      - backup
  /api/v1/backup/{backup_name}:
    delete:
      description: Delete a specific backup file.
      operationId: delete_backup_api_v1_backup__backup_name__delete
      parameters:
      - in: path
        name: backup_name
        required: true
        schema:
          title: Backup Name
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete backup file
      tags:
      - backup
  /api/v1/cleanup:
    post:
      description: Clean up old backup files based on retention policy.
      operationId: cleanup_backups_api_v1_cleanup_post
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Clean up old backups
      tags:
      - backup
  /api/v1/config/:
    get:
      description: 'Get current system configuration.


        This endpoint returns the current system configuration including

        model settings, threshold parameters, and age grouping strategy.'
      operationId: get_config_api_v1_config__get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/SystemConfigurationResponse'
          description: Successful Response
      summary: Get Config
      tags:
      - configuration
    put:
      description: 'Update system configuration.


        This endpoint updates various system configuration settings

        including thresholds and age grouping parameters.'
      operationId: update_config_api_v1_config__put
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ConfigurationUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Config
      tags:
      - configuration
  /api/v1/config/age-grouping:
    put:
      description: 'Modify age grouping strategy.


        This endpoint updates the age grouping configuration and can

        optionally trigger recreation of age group models.'
      operationId: update_age_grouping_api_v1_config_age_grouping_put
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ConfigurationUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Age Grouping
      tags:
      - configuration
  /api/v1/config/health:
    get:
      description: 'System health check endpoint.


        This endpoint provides information about the health and status

        of various system components.'
      operationId: health_check_api_v1_config_health_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HealthCheckResponse'
          description: Successful Response
      summary: Health Check
      tags:
      - configuration
  /api/v1/config/reset:
    post:
      description: 'Reset system configuration and models.


        WARNING: This endpoint deactivates all models and clears caches.

        Use with caution in production environments.'
      operationId: reset_system_api_v1_config_reset_post
      parameters:
      - in: query
        name: confirm
        required: false
        schema:
          default: false
          title: Confirm
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Reset System
      tags:
      - configuration
  /api/v1/config/stats:
    get:
      description: 'Get comprehensive system statistics.


        This endpoint provides detailed statistics about the system

        including data distribution, model performance, and usage metrics.'
      operationId: get_system_stats_api_v1_config_stats_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get System Stats
      tags:
      - configuration
  /api/v1/config/threshold:
    put:
      description: 'Update global threshold settings.


        This endpoint recalculates thresholds for all active models

        using the specified percentile value from the request body.'
      operationId: update_threshold_settings_api_v1_config_threshold_put
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ThresholdUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/SuccessResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Threshold Settings
      tags:
      - configuration
  /api/v1/drawings/:
    get:
      description: List drawings with optional filtering and pagination.
      operationId: list_drawings_api_v1_drawings__get
      parameters:
      - in: query
        name: age_min
        required: false
        schema:
          anyOf:
          - type: number
          - type: 'null'
          title: Age Min
      - in: query
        name: age_max
        required: false
        schema:
          anyOf:
          - type: number
          - type: 'null'
          title: Age Max
      - in: query
        name: subject
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Subject
      - in: query
        name: expert_label
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/ExpertLabel'
          - type: 'null'
          title: Expert Label
      - in: query
        name: page
        required: false
        schema:
          default: 1
          title: Page
          type: integer
      - in: query
        name: page_size
        required: false
        schema:
          default: 20
          title: Page Size
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/DrawingListResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Drawings
      tags:
      - drawings
  /api/v1/drawings/batch/upload:
    post:
      description: 'Upload multiple drawings in batch.


        This endpoint accepts multiple files and processes them in the background.

        Returns an upload ID for tracking progress.'
      operationId: batch_upload_drawings_api_v1_drawings_batch_upload_post
      requestBody:
        content:
          multipart/form-data:
            example: {}
            schema:
              $ref: '#/components/schemas/Body_batch_upload_drawings_api_v1_drawings_batch_upload_post'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Batch Upload Drawings
      tags:
      - drawings
  /api/v1/drawings/stats:
    get:
      description: Get statistics about stored drawings.
      operationId: get_drawing_stats_api_v1_drawings_stats_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get Drawing Stats
      tags:
      - drawings
  /api/v1/drawings/upload:
    post:
      description: 'Upload drawing with metadata.


        This endpoint accepts multipart form data with an image file and metadata.

        The image is validated, preprocessed, and stored along with the metadata.'
      operationId: upload_drawing_api_v1_drawings_upload_post
      requestBody:
        content:
          multipart/form-data:
            example: {}
            schema:
              $ref: '#/components/schemas/Body_upload_drawing_api_v1_drawings_upload_post'
        required: true
      responses:
        '201':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/DrawingResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Upload Drawing
      tags:
      - drawings
  /api/v1/drawings/upload/progress/{upload_id}:
    get:
      description: Get upload progress for large file uploads.
      operationId: get_upload_progress_api_v1_drawings_upload_progress__upload_id__get
      parameters:
      - in: path
        name: upload_id
        required: true
        schema:
          title: Upload Id
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Upload Progress
      tags:
      - drawings
  /api/v1/drawings/{drawing_id}:
    delete:
      description: Delete drawing and associated data.
      operationId: delete_drawing_api_v1_drawings__drawing_id__delete
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      responses:
        '204':
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Drawing
      tags:
      - drawings
    get:
      description: Retrieve drawing details by ID.
      operationId: get_drawing_api_v1_drawings__drawing_id__get
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/DrawingResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Drawing
      tags:
      - drawings
  /api/v1/drawings/{drawing_id}/file:
    get:
      description: Retrieve the actual drawing file.
      operationId: get_drawing_file_api_v1_drawings__drawing_id__file_get
      parameters:
      - in: path
        name: drawing_id
        required: true
        schema:
          title: Drawing Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Drawing File
      tags:
      - drawings
  /api/v1/export:
    post:
      description: Export system data in specified format.
      operationId: export_data_api_v1_export_post
      parameters:
      - description: Export format
        in: query
        name: format
        required: false
        schema:
          default: json
          description: Export format
          pattern: ^(json|csv)$
          title: Format
          type: string
      - description: Include embedding vectors
        in: query
        name: include_embeddings
        required: false
        schema:
          default: false
          description: Include embedding vectors
          title: Include Embeddings
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Export system data
      tags:
      - backup
  /api/v1/export/download/{export_name}:
    get:
      description: Download an exported data file.
      operationId: download_export_api_v1_export_download__export_name__get
      parameters:
      - in: path
        name: export_name
        required: true
        schema:
          title: Export Name
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Download exported data
      tags:
      - backup
  /api/v1/health:
    get:
      description: Basic health check endpoint.
      operationId: basic_health_check_api_v1_health_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Basic health check
      tags:
      - health
  /api/v1/health/component/{component_name}:
    get:
      description: Get health status for a specific component.
      operationId: component_health_check_api_v1_health_component__component_name__get
      parameters:
      - in: path
        name: component_name
        required: true
        schema:
          title: Component Name
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Component-specific health check
      tags:
      - health
  /api/v1/health/detailed:
    get:
      description: Detailed health check with all system components.
      operationId: detailed_health_check_api_v1_health_detailed_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Detailed health check
      tags:
      - health
  /api/v1/metrics:
    get:
      description: Get current system metrics.
      operationId: get_system_metrics_api_v1_metrics_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: System metrics
      tags:
      - health
  /api/v1/metrics/history:
    get:
      description: Get historical system metrics.
      operationId: get_metrics_history_api_v1_metrics_history_get
      parameters:
      - description: Hours of history to retrieve
        in: query
        name: hours
        required: false
        schema:
          default: 1
          description: Hours of history to retrieve
          maximum: 24
          minimum: 1
          title: Hours
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Historical metrics
      tags:
      - health
  /api/v1/models/age-groups:
    get:
      description: 'List available age group models.


        This endpoint returns all age group models with their status,

        sample counts, and threshold information.'
      operationId: list_age_group_models_api_v1_models_age_groups_get
      parameters:
      - in: query
        name: active_only
        required: false
        schema:
          default: true
          title: Active Only
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/ModelListResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Age Group Models
      tags:
      - models
  /api/v1/models/auto-create:
    post:
      description: 'Automatically create age group models based on data distribution.


        This endpoint analyzes the available drawing data and creates

        appropriate age group models with sufficient sample sizes.'
      operationId: auto_create_age_groups_api_v1_models_auto_create_post
      parameters:
      - in: query
        name: force_recreate
        required: false
        schema:
          default: false
          title: Force Recreate
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Auto Create Age Groups
      tags:
      - models
  /api/v1/models/creation/{job_id}/status:
    get:
      description: Get model creation job status.
      operationId: get_creation_status_api_v1_models_creation__job_id__status_get
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          title: Job Id
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Creation Status
      tags:
      - models
  /api/v1/models/data-sufficiency/age-group/{age_min}/{age_max}:
    get:
      description: 'Analyze data sufficiency for a specific age group.


        This endpoint provides detailed analysis of data availability,

        quality, and distribution for a single age group.'
      operationId: analyze_specific_age_group_api_v1_models_data_sufficiency_age_group__age_min___age_max__get
      parameters:
      - in: path
        name: age_min
        required: true
        schema:
          title: Age Min
          type: number
      - in: path
        name: age_max
        required: true
        schema:
          title: Age Max
          type: number
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Analyze Specific Age Group
      tags:
      - models
  /api/v1/models/data-sufficiency/analyze:
    get:
      description: "Analyze data sufficiency for age groups.\n\nThis endpoint analyzes\
        \ the available data for specified age groups\nand provides warnings about\
        \ insufficient data, unbalanced distributions,\nand other data quality issues.\n\
        \nArgs:\n    age_groups: Comma-separated list of age ranges (e.g., \"3-4,4-5,5-6\"\
        )\n               If not provided, analyzes all existing age group models"
      operationId: analyze_data_sufficiency_api_v1_models_data_sufficiency_analyze_get
      parameters:
      - in: query
        name: age_groups
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Age Groups
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Analyze Data Sufficiency
      tags:
      - models
  /api/v1/models/data-sufficiency/merge-age-groups:
    post:
      description: 'Merge age groups to improve data sufficiency.


        This endpoint deactivates the original age group models and creates

        a new merged age group model with combined data.'
      operationId: merge_age_groups_api_v1_models_data_sufficiency_merge_age_groups_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/Body_merge_age_groups_api_v1_models_data_sufficiency_merge_age_groups_post'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Merge Age Groups
      tags:
      - models
  /api/v1/models/data-sufficiency/warnings:
    get:
      description: 'Get data sufficiency warnings for all age groups.


        This endpoint returns warnings about data quality issues,

        optionally filtered by severity level.'
      operationId: get_data_warnings_api_v1_models_data_sufficiency_warnings_get
      parameters:
      - in: query
        name: severity
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Severity
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Data Warnings
      tags:
      - models
  /api/v1/models/status:
    get:
      description: 'Get model training and system status.


        This endpoint provides an overview of the model management system,

        including counts of models in different states and overall system health.'
      operationId: get_model_status_api_v1_models_status_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/ModelStatusResponse'
          description: Successful Response
      summary: Get Model Status
      tags:
      - models
  /api/v1/models/train:
    post:
      description: 'Train new age group model.


        This endpoint starts training a new autoencoder model for the specified

        age range. Training is performed in the background and progress can be

        tracked using the returned job ID.'
      operationId: train_age_group_model_api_v1_models_train_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ModelTrainingRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Train Age Group Model
      tags:
      - models
  /api/v1/models/training/{job_id}/status:
    get:
      description: Get training job status.
      operationId: get_training_status_api_v1_models_training__job_id__status_get
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          title: Job Id
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Training Status
      tags:
      - models
  /api/v1/models/{model_id}:
    delete:
      description: 'Delete (deactivate) an age group model.


        This endpoint deactivates a model rather than permanently deleting it

        to preserve analysis history.'
      operationId: delete_model_api_v1_models__model_id__delete
      parameters:
      - in: path
        name: model_id
        required: true
        schema:
          title: Model Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Delete Model
      tags:
      - models
  /api/v1/models/{model_id}/threshold:
    put:
      description: 'Update model threshold.


        This endpoint allows updating the anomaly detection threshold

        for a specific age group model. The threshold can be set directly

        or calculated from a percentile of validation data.'
      operationId: update_model_threshold_api_v1_models__model_id__threshold_put
      parameters:
      - in: path
        name: model_id
        required: true
        schema:
          title: Model Id
          type: integer
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ThresholdUpdateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                additionalProperties: true
                title: Response Update Model Threshold Api V1 Models  Model Id  Threshold
                  Put
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Update Model Threshold
      tags:
      - models
  /api/v1/status:
    get:
      description: Get overall system status summary.
      operationId: get_system_status_api_v1_status_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Overall system status
      tags:
      - health
  /api/v1/storage/cleanup:
    post:
      description: Clean up temporary files and orphaned data.
      operationId: cleanup_storage_api_v1_storage_cleanup_post
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Clean up temporary and orphaned files
      tags:
      - backup
  /api/v1/storage/info:
    get:
      description: Get information about storage usage and organization.
      operationId: get_storage_info_api_v1_storage_info_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get storage information
      tags:
      - backup
  /api/v1/training/deploy:
    post:
      description: 'Deploy trained model parameters to production system.


        This endpoint loads trained model parameters and creates a new

        age group model for production use.'
      operationId: deploy_trained_model_api_v1_training_deploy_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/ModelDeploymentRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Deploy Trained Model
      tags:
      - training
  /api/v1/training/environments/status:
    get:
      description: 'Get status of available training environments.


        This endpoint returns information about local and SageMaker

        training environments, including availability and configuration.'
      operationId: get_training_environments_status_api_v1_training_environments_status_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get Training Environments Status
      tags:
      - training
  /api/v1/training/jobs:
    get:
      description: 'List training jobs with optional filtering.


        This endpoint returns a list of training jobs, optionally filtered

        by environment (local/sagemaker) and status.'
      operationId: list_training_jobs_api_v1_training_jobs_get
      parameters:
      - in: query
        name: environment
        required: false
        schema:
          anyOf:
          - $ref: '#/components/schemas/TrainingEnvironment'
          - type: 'null'
          title: Environment
      - in: query
        name: status
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
      - in: query
        name: limit
        required: false
        schema:
          default: 50
          title: Limit
          type: integer
      responses:
        '200':
          content:
            application/json:
              example:
              - {}
              schema:
                items:
                  $ref: '#/components/schemas/TrainingJobResponse'
                title: Response List Training Jobs Api V1 Training Jobs Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: List Training Jobs
      tags:
      - training
    post:
      description: 'Submit a new training job to either local or SageMaker environment.


        This endpoint creates and submits a training job based on the specified

        environment. For SageMaker jobs, it handles container building, data upload,

        and job submission. For local jobs, it starts training immediately.'
      operationId: submit_training_job_api_v1_training_jobs_post
      requestBody:
        content:
          application/json:
            example: {}
            schema:
              $ref: '#/components/schemas/TrainingConfigRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/TrainingJobResponse'
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Submit Training Job
      tags:
      - training
  /api/v1/training/jobs/{job_id}:
    get:
      description: 'Get detailed status of a specific training job.


        This endpoint returns comprehensive information about a training job,

        including progress, metrics, and environment-specific details.'
      operationId: get_training_job_status_api_v1_training_jobs__job_id__get
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          title: Job Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema:
                additionalProperties: true
                title: Response Get Training Job Status Api V1 Training Jobs  Job
                  Id  Get
                type: object
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Training Job Status
      tags:
      - training
  /api/v1/training/jobs/{job_id}/cancel:
    post:
      description: 'Cancel a running training job.


        This endpoint attempts to cancel a training job. For local jobs,

        it stops the training process. For SageMaker jobs, it stops the

        SageMaker training job.'
      operationId: cancel_training_job_api_v1_training_jobs__job_id__cancel_post
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          title: Job Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Cancel Training Job
      tags:
      - training
  /api/v1/training/jobs/{job_id}/reports:
    get:
      description: 'Get training reports for a specific job.


        This endpoint returns all training reports associated with a job,

        including metrics, model paths, and performance summaries.'
      operationId: get_training_reports_api_v1_training_jobs__job_id__reports_get
      parameters:
      - in: path
        name: job_id
        required: true
        schema:
          title: Job Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example:
              - {}
              schema:
                items:
                  $ref: '#/components/schemas/TrainingReportResponse'
                title: Response Get Training Reports Api V1 Training Jobs  Job Id  Reports
                  Get
                type: array
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Get Training Reports
      tags:
      - training
  /api/v1/training/models/deploy:
    post:
      description: 'Deploy exported model to production environment.


        This endpoint deploys an exported model to the production system,

        making it available for anomaly detection in the specified age group.'
      operationId: deploy_exported_model_api_v1_training_models_deploy_post
      parameters:
      - in: query
        name: model_export_path
        required: true
        schema:
          title: Model Export Path
          type: string
      - in: query
        name: age_group_min
        required: true
        schema:
          title: Age Group Min
          type: number
      - in: query
        name: age_group_max
        required: true
        schema:
          title: Age Group Max
          type: number
      - in: query
        name: replace_existing
        required: false
        schema:
          default: false
          title: Replace Existing
          type: boolean
      - in: query
        name: validate_before_deployment
        required: false
        schema:
          default: true
          title: Validate Before Deployment
          type: boolean
      - in: query
        name: backup_existing
        required: false
        schema:
          default: true
          title: Backup Existing
          type: boolean
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Deploy Exported Model
      tags:
      - training
  /api/v1/training/models/deployed:
    get:
      description: 'List all deployed models in production.


        This endpoint returns information about all models currently

        deployed and active in the production system.'
      operationId: list_deployed_models_api_v1_training_models_deployed_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: List Deployed Models
      tags:
      - training
  /api/v1/training/models/export:
    post:
      description: 'Export trained model from training job in production-compatible
        format.


        This endpoint exports a trained model from a completed training job,

        creating a production-ready model file with metadata and validation.'
      operationId: export_model_from_training_job_api_v1_training_models_export_post
      parameters:
      - in: query
        name: training_job_id
        required: true
        schema:
          title: Training Job Id
          type: integer
      - in: query
        name: age_group_min
        required: true
        schema:
          title: Age Group Min
          type: number
      - in: query
        name: age_group_max
        required: true
        schema:
          title: Age Group Max
          type: number
      - in: query
        name: export_format
        required: false
        schema:
          default: pytorch
          title: Export Format
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Export Model From Training Job
      tags:
      - training
  /api/v1/training/models/exports:
    get:
      description: 'List all exported models with their metadata.


        This endpoint returns a list of all models that have been exported,

        including their metadata, export timestamps, and file information.'
      operationId: list_exported_models_api_v1_training_models_exports_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: List Exported Models
      tags:
      - training
  /api/v1/training/models/validate:
    post:
      description: 'Validate exported model for compatibility and integrity.


        This endpoint performs comprehensive validation of an exported model,

        checking file integrity, compatibility, and performance metrics.'
      operationId: validate_exported_model_api_v1_training_models_validate_post
      parameters:
      - in: query
        name: model_id
        required: true
        schema:
          title: Model Id
          type: string
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Validate Exported Model
      tags:
      - training
  /api/v1/training/models/{model_id}/undeploy:
    post:
      description: 'Undeploy (deactivate) a deployed model.


        This endpoint deactivates a deployed model, removing it from

        active use in the production system.'
      operationId: undeploy_model_api_v1_training_models__model_id__undeploy_post
      parameters:
      - in: path
        name: model_id
        required: true
        schema:
          title: Model Id
          type: integer
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Undeploy Model
      tags:
      - training
  /api/v1/training/sagemaker/setup:
    post:
      description: 'Setup SageMaker training environment.


        This endpoint helps set up the necessary AWS resources for

        SageMaker training, including IAM roles and container repositories.'
      operationId: setup_sagemaker_environment_api_v1_training_sagemaker_setup_post
      parameters:
      - in: query
        name: s3_bucket
        required: true
        schema:
          title: S3 Bucket
          type: string
      - in: query
        name: ecr_repository
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Ecr Repository
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
        '422':
          content:
            application/json:
              example: {}
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
          description: Validation Error
      summary: Setup Sagemaker Environment
      tags:
      - training
  /health:
    get:
      description: Health check endpoint for monitoring.
      operationId: health_check_health_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Health Check
      tags:
      - Health
  /health/detailed:
    get:
      description: Detailed health check with system information.
      operationId: detailed_health_check_health_detailed_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Detailed Health Check
      tags:
      - Health
  /metrics:
    get:
      description: Get system metrics for monitoring.
      operationId: get_metrics_metrics_get
      responses:
        '200':
          content:
            application/json:
              example: {}
              schema: {}
          description: Successful Response
      summary: Get Metrics
      tags:
      - Metrics
servers:
- description: Development server
  url: http://localhost:8000
- description: API v1 base path
  url: /api/v1
